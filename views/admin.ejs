<%- include("templates/header") %> 
<div class="container">
 
    <p>For Admin Only </p>

  <div class="row">
    <div class="col-md-4">
      <img src="/images/1.gif" class="img-fluid">
    </div>
    <div class="col-md-4">
      <img src="/images/2.gif" class="img-fluid">
    </div>
    <div class="col-md-4">
      <img src="/images/3.gif" class="img-fluid">
    </div>
  </div>

  <br>
  <br>
<div>Users:</div>
<ul>
  <% users.forEach(user => { %>
    <li style="border-bottom: 1px solid black; padding: 10px;">
      <div style="display: inline-block;"><%= user.username %></div>
      <% if(user.type === "admin") { %>
        <div style="display: inline-block; margin-left: 10px;">
          <button class="btn btn-danger btn-sm" onclick=" demoteUser(user)">Demote to User</button>
          <button class="btn btn-success btn-sm" disabled>Promote to Admin</button>
        </div>
      <% } else { %>
        <div style="display: inline-block; margin-left: 10px;">
          <button class="btn btn-danger btn-sm" disabled>Demote to User</button>
          <button class="btn btn-success btn-sm" onclick="promoteUser(user)">Promote to Admin</button>
        </div>
      <% } %>
    </li>
  <% }); %>
</ul>
  <form action="/logout" method="POST">
    <button type="submit" class="btn btn-primary">Sign Out</button>
    <br>
    <br>
    
  </form>
</div>

<%- include("templates/footer") %>

<script>
    function promoteUser(user) {
        // Send an AJAX request to the server to promote the user at the given index
    // Reload the page to update the user list
            $.ajax({
                url: '/promote',
                method: 'POST',
                data: { username: user.username },
                success: function(response) {
                    window.location.reload();
                }
            });
    }

    function demoteUser(user) {
 // Send an AJAX request to the server to demote the user at the given index
    // Reload the page to update the user list
            $.ajax({
                url: '/demote',
                method: 'POST',
                data: { username: user.username },
                success: function(response) {
                    window.location.reload();
                }
            });
    }
</script>